<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
	<title>Nicolas Vera</title>

	<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	
	<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>

	<h2 class="centerH2">Particles</h2>
	<p class="centerP">Mouse over or touch and swipe. Choose a shape and color!</p>

	<div id="particleOptions">

		<select id="shapeSelect">
			<option value="circle">Circles</option>
			<option value="rect">Squares</option>
		</select>

		<input id="colorSelect" type="color" value="#ff0000">
		<input id="colorRandom" type="checkbox" value="random">Random color

	</div>

	<div id="svgParticle"></div>
	<script>

	var width = 800, height = 400;

	var svgParticle = d3.select("#svgParticle").append("svg")
		.attr("width", width)
		.attr("height", height);

	svgParticle.append("rect")
		.attr("width", width)
		.attr("height", height)
		.attr("fill", "#BBBBBB")
		.attr("pointer-events", "all")
		.on("ontouchstart" in document?"touchmove":"mousemove", particle);

	function particle() {
		var mouseCoords = d3.mouse(this);
		var shape = d3.select("#shapeSelect").property("value");
		var color;
		if (d3.select("#colorRandom").property("checked")) {
			var randomR = Math.random()*255;
			var randomG = Math.random()*255;
			var randomB = Math.random()*255;
			color = d3.rgb(randomR, randomG, randomB);
		} else {
			color = d3.select("#colorSelect").property("value");
		}

		if (shape == "circle"){

			svgParticle.insert("circle")
				.attr("cx", mouseCoords[0])
				.attr("cy", mouseCoords[1])
				.attr("r", .01)
				.style("stroke", color)
				.style("stroke-width", 2)
				.style("stroke-opacity", 1)
				.style("fill", "none")
				.transition()
					.duration(2500)
					.ease(Math.sqrt)
					.attr("r", 150)
					.style("stroke-opacity", .01)
					.remove();

			} else if (shape == "rect") {

				svgParticle.insert("rect")
				.attr("x", mouseCoords[0])
				.attr("y", mouseCoords[1])
				.attr("width", .01)
				.attr("height", .01)
				.style("stroke", color)
				.style("stroke-width", 2)
				.style("stroke-opacity", 1)
				.style("fill", "none")
				.transition()
					.duration(2500)
					.ease(Math.sqrt)
					.attr("width", 150)
					.attr("height", 150)
					.style("stroke-opacity", .01)
					.remove();
			}
			d3.event.preventDefault();
	}

	</script>

	<h2 class="centerH2">Node Graph</h2>
	<p class="centerP">Node graph using force layout</p>

	<div id="forceOptions">

	</div>

	<div id="svgForce"></div>
	<script>

	var width = 800, height = 400;

	var svgForce = d3.select("#svgForce").append("svg")
		.attr("width", width)
		.attr("height", height);

	svgForce.append("rect")
		.attr("width", width)
		.attr("height", height)
		.attr("fill", "#BBBBBB");

	</script>

</body>
</html>
